@using VehicleInformationChecker.Components.UI.ImageViewer
@using VehicleInformationChecker.Components.UI.MotStatus
@using VehicleInformationChecker.Components.UI.MotHistory
@using VehicleInformationChecker.Components.UI.TaxStatus

@if (Vehicle != null && !String.IsNullOrEmpty(Vehicle.RegistrationNumber))
{
    <ImageViewer Images="@Vehicle?.Images" PlaceholderImage="@_placeholderImage" IsSearching="@(_isSearchingImages || _isSearchingDetails)"></ImageViewer>

    @if (_isSearchingDetails)
    {
        <MudGrid Class="mt-4">
            <MudItem xs="12" md="8">
                <MudSkeleton SkeletonType="SkeletonType.Rectangle" Height="400px" Width="100%"></MudSkeleton>
            </MudItem>

            <MudItem xs="12" md="4">
                <MudStack Style="height:100%;">
                    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Height="100%" Width="100%"></MudSkeleton>
                    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Height="100%" Width="100%"></MudSkeleton>
                </MudStack>
            </MudItem>
        </MudGrid>
    }
    else
    {
        <MudGrid Class="mt-4">
            <MudItem xs="12" md="8">
                <MudPaper Class="pa-4" Elevation="1">
                    <MudText Typo="Typo.h3" Align="Align.Center">@Vehicle?.YearOfManufacture @Vehicle?.Make @Vehicle?.Model</MudText>

                    <MudText Typo="Typo.h4">AI Summary</MudText>
                    @if (_isSearchingAiSummary)
                    {
                        <MudSkeleton />
                        <MudSkeleton />
                        <MudSkeleton />
                        <MudSkeleton />
                        <MudSkeleton />
                        <MudSkeleton />
                    }
                    else
                    {
                        <MudText Typo="Typo.body2">
                            @Vehicle?.AiSummary <br />
                            <br />
                        </MudText>
                    }

                    <MudText Typo="Typo.h4">Details</MudText>
                    <MudText Typo="Typo.body2">
                        Year  :  @Vehicle?.YearOfManufacture <br />
                        Make  :  @Vehicle?.Make <br />
                        Model  :  @Vehicle?.Model <br />
                        Colour  :  @Vehicle?.Colour <br />
                        Engine capacity  :  @Vehicle?.EngineCapacity <br />
                        Fuel  :  @Vehicle?.FuelType <br />
                        <br />
                        Tax status  :  @Vehicle?.TaxStatus <br />
                        Tax due date  :  @Vehicle?.TaxDueDate <br />
                        MOT status  :  @Vehicle?.MotStatus <br />
                        MOT expiry date  :  @Vehicle?.MotExpiryDate <br />
                        <br />
                        Last V5C issued  :  @Vehicle?.DateOfLastV5CIssued <br />
                        First registered  :  @Vehicle?.MonthOfFirstRegistration.ToString("MMMM yyyy") <br />
                        <br />
                    </MudText>
                </MudPaper>
            </MudItem>

            <MudItem xs="12" md="4">
                <MudStack Style="height:100%;">
                    <MotStatus Vehicle="@Vehicle"></MotStatus>
                    <TaxStatus Vehicle="@Vehicle"></TaxStatus>
                </MudStack>
            </MudItem>

            <MudItem xs="12">
                <MotHistory Vehicle="@Vehicle"></MotHistory>
            </MudItem>
        </MudGrid>
    }
}